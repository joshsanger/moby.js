jQuery(document).ready(function(e){function o(o,n,s,t,a){e("#moby.moby-hidden").length>0&&e("#moby").removeClass("moby-hidden"),e("#moby").addClass("moby-active"),e("body").addClass("moby-body-fixed"),1==n&&e("#moby-overlay").addClass("moby-overlay-active"),e("#moby-clone").length<1&&(e("#"+o).clone().appendTo("#moby"),e("#moby #"+o).attr("id","moby-clone").removeAttr("class"),e("#moby #moby-clone li").find("ul").parent().find("> a").append("<span class='moby-expand'>"+s+"</span>"),e(".moby-expand").attr({"data-open":s,"data-close":t}),""!==a&&e("#moby-after").length<1&&e("#moby").append('<div id="moby-after">'+a+"</div>"))}function n(o){e("#moby").hasClass("moby-active")&&(1==o&&e("#moby-overlay").removeClass("moby-overlay-active"),e("#moby").removeClass("moby-active"),e("body").removeClass("moby-body-fixed"))}function s(o,s){var t=window.outerWidth;t>o&&e("#moby").hasClass("moby-active")&&n(s)}function t(o){o.preventDefault();var n=e(this).data("open"),s=e(this).data("close");e(this).hasClass("moby-submenu-open")?(e(this).html(n),e(this).removeClass("moby-submenu-open"),e(this).parent("a").parent("li").find("> ul").slideUp(200)):(e(this).html(s),e(this).addClass("moby-submenu-open"),e(this).parent("a").parent("li").find("> ul").slideDown(200))}e.fn.extend({moby:function(a){var d=e(this).attr("id");"undefined"==typeof a.mobyTrigger&&(a.mobyTrigger=e("#moby-button")),"undefined"==typeof a.overlay&&(a.overlay=!0),"undefined"==typeof a.menuClass&&(a.menuClass="right-side"),"undefined"==typeof a.subMenuOpenIcon&&(a.subMenuOpenIcon="<span>&#x25BC;</span>"),"undefined"==typeof a.subMenuCloseIcon&&(a.subMenuCloseIcon="<span>&#x25B2;</span>"),"undefined"==typeof a.closeButton&&(a.closeButton=!0),"undefined"==typeof a.closeButtonContent&&(a.closeButtonContent="<span>X</span> Close Menu"),"undefined"==typeof a.breakpoint&&(a.breakpoint=960),"undefined"==typeof a.enableEscape&&(a.enableEscape=!0),"undefined"==typeof a.insertAfter&&(a.insertAfter=""),"undefined"==typeof a.insertBefore&&(a.insertBefore=""),"undefined"==typeof a.overlayClass&&(a.overlayClass="dark"),1==a.overlay&&(e("body").prepend('<div id="moby-overlay" class="'+a.overlayClass+'"></div>'),e("#moby-overlay").on("click",function(){n(a.overlay)})),e("body").prepend('<div id="moby"></div>'),""!==a.insertBefore&&e("#moby").prepend('<div id="moby-before">'+a.insertBefore+"</div>"),1==a.closeButton&&(e("#moby").prepend('<div id="moby-close">'+a.closeButtonContent+"</div>"),e("#moby").find("#moby-close").on("click",function(){n(a.overlay)})),1==a.enableEscape&&e(document).on("keydown",function(e){27==e.keyCode&&n(a.overlay)}),e("#moby").addClass(a.menuClass+" moby-hidden"),console.log("bums"),a.mobyTrigger.on("click",function(){o(d,a.overlay,a.subMenuOpenIcon,a.subMenuCloseIcon,a.insertAfter)}),e(window).on("resize",function(){s(a.breakpoint,a.overlay)}),e("#moby").on("click",".moby-expand",t)}})});
