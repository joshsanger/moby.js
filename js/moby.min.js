jQuery(document).ready(function(e){function o(o,n,t,a){e("#moby.moby-hidden").length>0&&e("#moby").removeClass("moby-hidden"),e("#moby").addClass("moby-active"),e("body").addClass("moby-body-fixed"),1==n&&e("#moby-overlay").addClass("moby-overlay-active"),e("#moby-clone").length<1&&(e("#"+o).clone().appendTo("#moby"),e("#moby #"+o).attr("id","moby-clone").removeAttr("class"),e("#moby li").find("ul").parent().find("> a").append("<span class='moby-expand'>"+t+"</span>"),e(".moby-expand").attr({"data-open":t,"data-close":a}),e("#moby-after").length>0&&e("#moby-after").appendTo("#moby"))}function n(o){e("#moby").hasClass("moby-active")&&(1==o&&e("#moby-overlay").removeClass("moby-overlay-active"),e("#moby").removeClass("moby-active"),e("body").removeClass("moby-body-fixed"))}function t(o,t){var a=window.outerWidth;a>o&&e("#moby").hasClass("moby-active")&&n(t)}function a(o){o.preventDefault();var n=e(this).data("open"),t=e(this).data("close");e(this).hasClass("moby-submenu-open")?(e(this).html(n),e(this).removeClass("moby-submenu-open"),e(this).parent("a").parent("li").find("> ul").slideUp(200)):(e(this).html(t),e(this).addClass("moby-submenu-open"),e(this).parent("a").parent("li").find("> ul").slideDown(200))}function s(o){"#"==e(this).attr("href")&&(o.preventDefault(),e(this).find("> .moby-expand")&&e(this).find(" > .moby-expand").trigger("click"))}e.fn.extend({moby:function(i){var d=e(this).attr("id");"undefined"==typeof i.mobyTrigger&&(i.mobyTrigger=e("#moby-button")),"undefined"==typeof i.overlay&&(i.overlay=!0),"undefined"==typeof i.menuClass&&(i.menuClass="right-side"),"undefined"==typeof i.subMenuOpenIcon&&(i.subMenuOpenIcon="<span>&#x25BC;</span>"),"undefined"==typeof i.subMenuCloseIcon&&(i.subMenuCloseIcon="<span>&#x25B2;</span>"),"undefined"==typeof i.closeButton&&(i.closeButton=!0),"undefined"==typeof i.closeButtonContent&&(i.closeButtonContent="<span>X</span> Close Menu"),"undefined"==typeof i.breakpoint&&(i.breakpoint=1024),"undefined"==typeof i.enableEscape&&(i.enableEscape=!0),"undefined"==typeof i.insertAfter&&(i.insertAfter=""),"undefined"==typeof i.insertBefore&&(i.insertBefore=""),"undefined"==typeof i.overlayClass&&(i.overlayClass="dark"),1==i.overlay&&(e("body").prepend('<div id="moby-overlay" class="'+i.overlayClass+'"></div>'),e("#moby-overlay").on("click",function(){n(i.overlay)})),e("body").prepend('<div id="moby"></div>'),""!==i.insertBefore&&e("#moby").prepend('<div id="moby-before">'+i.insertBefore+"</div>"),""!==i.insertAfter&&e("#moby").append('<div id="moby-after">'+i.insertAfter+"</div>"),1==i.closeButton&&(e("#moby").prepend('<div id="moby-close">'+i.closeButtonContent+"</div>"),e("#moby").find("#moby-close").on("click",function(){n(i.overlay)})),1==i.enableEscape&&e(document).on("keydown",function(e){27==e.keyCode&&n(i.overlay)}),e("#moby").addClass(i.menuClass+" moby-hidden"),i.mobyTrigger.on("click",function(){o(d,i.overlay,i.subMenuOpenIcon,i.subMenuCloseIcon,i.insertAfter)}),e(window).on("resize",function(){t(i.breakpoint,i.overlay)}),e("#moby").on("click",".moby-expand",a),e("#moby").on("click","a",s)}})});
